
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Archimedes Pelican</title>
    <meta name="author" content="charlesreid1">


    <!-- http://t.co/dKP3o1e -->
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1">


      <link href="/archimedes-pelican/favicon.png" rel="icon">



    <!--
    my CSS styles
    -->
    <link href="/archimedes-pelican/theme/css/bootstrap.css"       rel="stylesheet" type="text/css">
    <link href="/archimedes-pelican/theme/css/sandstone.css"       rel="stylesheet" type="text/css"/>
    <link href="/archimedes-pelican/theme/css/navbar.css"          rel="stylesheet" type="text/css"/>
    <link href="/archimedes-pelican/theme/css/main.css"            rel="stylesheet" type="text/css"/>
    <link href="/archimedes-pelican/theme/css/font-awesome.css"    rel="stylesheet" type="text/css"/>

    <!--
    <link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic"
          rel="stylesheet" type="text/css"/>
    <link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic"
          rel="stylesheet" type="text/css"/>
    -->


    <link href="/archimedes-pelican/theme/css/pygment.css" rel="stylesheet" type="text/css"/>

    <script src="/archimedes-pelican/theme/js/jquery.min.js"></script>
    <script src="/archimedes-pelican/theme/js/bootstrap.min.js"></script>



    <!-- leaflet -->
    <link  href="/archimedes-pelican/theme/css/leaflet.css" rel="stylesheet" stype="text/css" />
    <script src="/archimedes-pelican/theme/js/leaflet.js" type="text/javascript"></script>

    <!-- D3 -->
    <script src="/archimedes-pelican/theme/js/d3.js" type="text/javascript"></script>

    <!-- angular -->
    <script src="/archimedes-pelican/theme/js/angular.js"></script>

    <!-- fullPage -->
    <!--
    <link  href="/archimedes-pelican/theme/css/jquery.fullPage.css" rel="stylesheet" stype="text/css" />
    <script src="/archimedes-pelican/theme/js/jquery.fullPage.js" type="text/javascript"></script>
    -->

    <!-- my style sheet -->
    <!--
    <link rel="stylesheet" type="text/css" href="/archimedes-pelican/mapstyles.css">
    -->

    <!-- common vars -->
    <!--
    <script src="/archimedes-pelican/common.js"></script>
    -->


</head>

<body>

<nav class="navbar navbar-default">
    <div class="container-fluid">
        <div class="navbar-header">
            <!--
            http://www.w3schools.com/bootstrap/bootstrap_case_navigation.asp
            -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span> 
            </button>
            <a class="navbar-brand" href="/archimedes-pelican/index.html" style="margin-right:20px;">Archimedes Pelican</a>
        </div>
        <div>
            <div class="collapse navbar-collapse" id="myNavbar">
                <ul class="nav navbar-nav">

                    <li class="spacer">
                        <p>&nbsp;</p>
                    </li>


                    <li>
                        <a href="/archimedes-pelican/about.html">About</a>
                    </li>


                    <li class="spacer">
                        <p>&nbsp;</p>
                    </li>


                    <li>
                        <a href="/archimedes-pelican/index.html">All Angular Examples</a>
                    </li>


                    <li class="spacer">
                        <p>&nbsp;</p>
                    </li>


                    <!--
                    <li>
                        <a href="/archimedes-pelican/blog.html">Blog</a>
                    </li>


                    <li class="spacer">
                        <p>&nbsp;</p>
                    </li>
                    -->


                    <li>
                        <a href="/archimedes-pelican/author.html">Author</a>
                    </li>

                </ul>
            </div>
        </div>
    </div>
</nav>


<!-- Main jumbotron -->
<div class="jumbotron">
    <div class="container">
        <h1><i class="fa fa-paper-plane-o"></i>&nbsp;Archimedes Pelican</h1>
        <p>Angular.js and Pelican</p>
        <p><a class="btn btn-primary btn-lg btn-large" 
            href="/archimedes-pelican/about.html" role="button">Learn More About It &nbsp;&nbsp;&nbsp; <i class="fa fa-arrow-circle-right"></i></a></p>
    </div>
</div>


<div class="container" id="bodycontainer">


While this example looks pretty boring, it's what's going on
under the hood that counts. The controller is incrementing 
a large number once per second, and a watch is set up on
that large number variable in two places: the controller,
and the directive.

<br />
<br />

Watching the large number variable from the controller is easy,
since the variable is already in the scope and accessible to 
the watch function.

<br />
<br />

Watching the large number variable from the directive is 
more tricky; because the directive scope is a subset of the 
controller scope, not every variable will be available to 
the directive. This requires the use of attributes to pass 
variables through from the controller scope to the directive
scope.

<br />
<br />

Once this is done, the directive can listen for changes to a 
variable in the controller.
This is a crucial piece of infrastructure if you need to load
large CSV or JSON files, and have the directives drawing plots
from those large data files wait until the data has been loaded.
In that case, you are loading/processing the data in the controller,
but implementing watchers on the data in the directives. 
<hr />

<div ng-app="watchApp">
    <div ng-controller="WatchController">

        <div class="row">
            <div class="col-sm-6">
                Watched variable, from controller:<br />
                <b>[[ controllerlabel ]]</b>
            </div>

            <div class="col-sm-6">
                Watched variable, from directive:<br />
                <b>[[ directivelabel ]]</b>
            </div>
        </div>

        <div class="row">
            <mydirective
            model='model'
            directivelabel='directivelabel'></mydirective>
        </div>

    </div>
</div>

<script type="text/javascript">

function WatchController($scope,$http,$interval,$timeout) {

    $scope.controllerlabel = "";
    $scope.directivelabel = "";

    // Set a watcher from the controller.
    $scope.$watch(function(){ return $scope.model; },
            function(v){ 
                $scope.controllerlabel = v; 
            });

    // Continuously change the scoped variable "model"
    var f = function() { 
        $scope.model = new Date().getTime() 
        $timeout(f, 1000);
    }
    f();

};

var mod = angular.module('watchApp',[],function($interpolateProvider) {
        $interpolateProvider.startSymbol('[[');
        $interpolateProvider.endSymbol(']]');
    }
);


var dir2 = mod.directive('mydirective', function() {

    function link(scope, element, attr) { 
        scope.$watch(function(){ return scope.model; },
            function(v){ 
                scope.directivelabel = v; 
            });
    };

    return {
        link: link,
        restrict: 'E',
        scope: { 
            directivelabel: '=',
            model: '='
        }
    }
});

var c = mod.controller("WatchController", ["$scope","$http","$interval","$timeout",WatchController]);

</script>



</div><!--container-->

<div class="container text-center">
    <p>&nbsp;</p>
    <p>
    Made with <i class="fa fa-fire-extinguisher fa-2x"></i> by <a href="http://charlesreid1.com">charlesreid1</a>.
    </p>
    <p>&nbsp;</p>
</div>


</body>
</html>


